
<link rel="stylesheet" type="text/css" href="{{ site.url }}/assets/css/ldavis.css">
<script type="text/javascript" src="{{ site.url }}/assets/js/ldavis.v1.0.0.js"></script>
<script type="text/javascript" src="lda_data.js"></script>

<div id="ldavis_bezos"></div>
<script type="text/javascript">
    function load_lib(url, async, callback){
        let s = document.createElement('script');
        s.src = url;
        s.async = async;
        s.onreadystatechange = s.onload = callback;
        s.onerror = function(){console.warn("failed to load library " + url);};
        document.getElementsByTagName("head")[0].appendChild(s);
    }
    let d3_path = "{{ site.url }}/assets/js/d3.v5.js";
    let ldajs_path = "{{ site.url }}/assets/js/ldavis.v1.0.0.js";

    if(typeof(LDAvis) !== "undefined"){
       // already loaded: just create the visualization
       !function(LDAvis){
           new LDAvis("#" + "ldavis_bezos", ldadata);
       }(LDAvis);
    }else if(typeof define === "function" && define.amd){
       // require.js is available: use it to load d3/LDAvis
       require.config({paths: {d3: d3_path}});
       require(["d3"], function(d3){
          window.d3 = d3;
          load_lib(ldajs_path, true, function(){
            new LDAvis("#" + "ldavis_bezos", ldadata);
          });
        });
    }else{
        // require.js not available: dynamically load d3 & LDAvis
        load_lib(d3_path, true, function(){
             load_lib(ldajs_path, true, function(){
                     new LDAvis("#" + "ldavis_bezos", ldadata);
                })
             });
    }
</script>